SYSTEM og;
    /* CIF TEXT (156, 190), (356, 248) */
    use dv comment 'dataview-uniq.asn';

signal telecommand(tc_type);
signal telemetry(tm_type);
    /* CIF ENDTEXT */
    CHANNEL c
        FROM ENV TO og WITH telecommand;
        FROM og TO ENV WITH telemetry;
    ENDCHANNEL;
    BLOCK og;
        SIGNALROUTE r
            FROM ENV TO og WITH telecommand;
            FROM og TO ENV WITH telemetry;
        CONNECT c AND r;
        /* CIF PROCESS (225, 49), (150, 75) */
        PROCESS og;
            STATE AGGREGATION wait;
            SUBSTRUCTURE
                    STATE memory_manager;
                    SUBSTRUCTURE
                            /* CIF START (259, 60), (70, 35) */
                            START;
                                /* CIF NEXTSTATE (231, 110), (126, 35) */
                                NEXTSTATE wait_for_tc;
                            /* CIF STATE (231, 110), (126, 35) */
                            STATE wait_for_tc;
                                /* CIF PROVIDED (64, 165), (459, 35) */
                                PROVIDED got_tc=true and present(tc!content)=patch_memory;
                                    /* CIF PROCEDURECALL (178, 215), (231, 35) */
                                    CALL writeln('Patch Memory');
                                    /* CIF NEXTSTATE (258, 265), (70, 35) */
                                    NEXTSTATE -;
                            ENDSTATE;
                    ENDSUBSTRUCTURE;
                    STATE tc_router;
                    SUBSTRUCTURE
                            /* CIF START (144, 56), (70, 35) */
                            START;
                                /* CIF NEXTSTATE (116, 106), (126, 35) */
                                NEXTSTATE wait_for_tc;
                            /* CIF STATE (116, 106), (126, 35) */
                            STATE wait_for_tc;
                                /* CIF INPUT (93, 161), (175, 35) */
                                INPUT telecommand(tc);
                                    /* CIF TASK (107, 211), (146, 35) */
                                    TASK got_tc := true;
                                    /* CIF NEXTSTATE (145, 261), (70, 35) */
                                    NEXTSTATE -;
                            ENDSTATE;
                    ENDSUBSTRUCTURE;
                    STATE mode_manager;
                    SUBSTRUCTURE
                            /* CIF START (359, 108), (70, 35) */
                            START;
                                /* CIF NEXTSTATE (331, 158), (126, 35) */
                                NEXTSTATE wait_for_tc;
                            /* CIF STATE (331, 158), (126, 35) */
                            STATE wait_for_tc;
                                /* CIF PROVIDED (170, 213), (451, 35) */
                                PROVIDED got_tc=true and present(tc!content)=change_mode;
                                    /* CIF PROCEDURECALL (282, 263), (226, 35) */
                                    CALL writeln('Change Mode');
                                    /* CIF NEXTSTATE (360, 313), (70, 35) */
                                    NEXTSTATE -;
                            ENDSTATE;
                    ENDSUBSTRUCTURE;
                    /* CIF STATE (314, 191), (161, 35) */
                    STATE mode_manager;
                    ENDSTATE;
                    /* CIF STATE (238, 111), (113, 35) */
                    STATE tc_router;
                    ENDSTATE;
                    /* CIF STATE (370, 97), (182, 35) */
                    STATE memory_manager;
                    ENDSTATE;
            ENDSUBSTRUCTURE;
            /* CIF TEXT (0, 310), (327, 208) */
            -- This system tests the provided clause
-- (continuous signal)

dcl tc TC_type;

dcl tm TM_type;

dcl got_tc Boolean_type;

dcl anything boolean_Type := true;
            /* CIF ENDTEXT */
            /* CIF START (351, 297), (70, 35) */
            START;
                /* CIF NEXTSTATE (337, 348), (99, 35) */
                NEXTSTATE starting;
            /* CIF STATE (333, 575), (70, 35) */
            STATE wait;
            ENDSTATE;
            /* CIF STATE (485, 344), (99, 35) */
            STATE starting;
                /* CIF PROVIDED (481, 399), (106, 35) */
                PROVIDED anything;
                    /* CIF TASK (450, 449), (168, 35) */
                    TASK anything := false;
                    /* CIF PROCEDURECALL (446, 499), (177, 35) */
                    CALL writeln('Lets go');
                    /* CIF NEXTSTATE (499, 549), (70, 35) */
                    NEXTSTATE wait;
            ENDSTATE;
        ENDPROCESS og;
    ENDBLOCK;
ENDSYSTEM;