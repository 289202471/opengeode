PROCESS challenge;
STATE ON;
SUBSTRUCTURE
in (via_toto);
out (ret0);
/* CIF START (304, -22), (89, 35) */
START via_toto ;
/* CIF PROCEDURECALL (213, 28), (271, 35) */
CALL writeln('start via toto, returning ret0');
/* CIF RETURN (331, 78), (35, 35) */
RETURN ret0;
/* CIF START (54, -21), (70, 35) */
START;
/* CIF PROCEDURECALL (-10, 29), (199, 35) */
CALL writeln('start without via');
/* CIF NEXTSTATE (54, 79), (70, 35) */
NEXTSTATE hello;
/* CIF STATE (-208, -29), (70, 35) */
STATE hello;
/* CIF INPUT (-208, 32), (70, 35) */
INPUT run;
/* CIF PROCEDURECALL (-349, 82), (353, 35) */
CALL writeln('Bye substate, leaving with no return value');
/* CIF RETURN (-190, 132), (35, 35) */
RETURN ;
ENDSTATE;

ENDSUBSTRUCTURE;
/* CIF TEXT (-486, -40), (298, 56) */
-- This system tests nested states
/* CIF ENDTEXT */
/* CIF PROCEDURE (-992, 214), (66, 35) */
PROCEDURE toto;
/* CIF TEXT (371, 134), (298, 140) */
-- Declare your variables

-- Syntax: DCL <variable name> <type name>;

dcl i T_Int8  := 1;
/* CIF ENDTEXT */
/* CIF START (178, 86), (70, 35) */
START;
/* CIF DECISION (178, 136), (70, 50) */
DECISION i;
/* CIF ANSWER (131, 206), (73, 23) */
(1):
/* CIF TASK (127, 244), (80, 35) */
TASK i := i + 1;
/* CIF RETURN (150, 294), (35, 35) */
RETURN ;
/* CIF ANSWER (223, 206), (70, 23) */
ELSE:
/* CIF RETURN (240, 244), (35, 35) */
RETURN ;
ENDDECISION;
ENDPROCEDURE;
/* CIF START (-842, 59), (68, 37) */
START;
/* CIF NEXTSTATE (-843, 111), (70, 35) */
NEXTSTATE OFF;




/* CIF STATE (-176, 32), (65, 35) */
STATE ON;
/* CIF INPUT (16, 87), (88, 35) */
INPUT any_one;
/* CIF NEXTSTATE (3, 137), (113, 35) */
NEXTSTATE ON;
/* CIF INPUT (126, 87), (78, 35) */
INPUT go_off;
/* CIF NEXTSTATE (130, 137), (70, 35) */
NEXTSTATE OFF;
/* CIF CONNECT (-143, 87), (0, 35) */
CONNECT ret0;
/* CIF PROCEDURECALL (-279, 137), (272, 35) */
CALL writeln('Received ret0, going to Safe');
/* CIF NEXTSTATE (-176, 187), (67, 35) */
NEXTSTATE Safe;
/* CIF CONNECT (-459, 87), (0, 35) */
CONNECT ;
/* CIF PROCEDURECALL (-629, 137), (340, 35) */
CALL writeln('Exit from nested state (no return value)');
/* CIF NEXTSTATE (-494, 187), (70, 35) */
NEXTSTATE off;
ENDSTATE;


/* CIF STATE (-443, 238), (73, 35) */
STATE Safe;
/* CIF INPUT (-487, 293), (70, 35) */
INPUT *;
/* CIF NEXTSTATE (-487, 343), (70, 35) */
NEXTSTATE Off;
/* CIF INPUT (-406, 293), (88, 35) */
INPUT any_one;
/* CIF NEXTSTATE (-397, 343), (70, 35) */
NEXTSTATE on;
ENDSTATE;

/* CIF STATE (-843, 111), (70, 35) */
STATE OFF;
/* CIF INPUT (-843, 166), (70, 35) */
INPUT run;
/* CIF PROCEDURECALL (-916, 216), (217, 35) */
CALL writeln('Going ON VIA TOTO');
/* CIF NEXTSTATE (-875, 267), (132, 35) */
NEXTSTATE ON via via_toto
/* CIF COMMENT (-723, 267), (219, 35) */
COMMENT 'Enter substate via entry point';
ENDSTATE;
ENDPROCESS challenge;